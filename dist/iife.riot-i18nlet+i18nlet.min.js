var riotI18nlet=function(t){"use strict";var e="0.2.5";t=t&&t.hasOwnProperty("default")?t["default"]:t;var i="0.0.5";var n=false;var s="en";var r="{{";var o="}}";var a=null;var g="";var l="i";var h=true;var u=function(t){var e=arguments;var i=[],n=arguments.length-1;while(n-- >0){i[n]=e[n+1]}i.unshift("["+t.toUpperCase()+"]");i.unshift("[i18nlet]");try{console.log.apply(console,i)}catch(t){console.log(i)}};var f=function(t,e){var i=this;if(!this.store[t]){this.store[t]={}}Object.keys(e).forEach(function(n){i.store[t][n]=e[n]})};var c=function(t){var e=this;Object.keys(t).forEach(function(i){e.load(i,t[i])})};var p=function t(){};p.prototype.init=function t(e){var p=this;if(e===void 0){e={}}this.version=i||"";this.store={};this.settings={};this.settings.currentLangage=this.settings.defaultLangage=e.defaultLangage||s;this.settings.debug=e.debug||n;this.settings.variableKeyPrefix=e.variableKeyPrefix||r;this.settings.variableKeySuffix=e.variableKeySuffix||o;this.settings.noConvertVariable=e.noConvertVariable||a;this.settings.reference=h;if(typeof e.reference==="boolean"){this.settings.reference=e.reference}this.settings.defaultText=g;if(typeof e.defaultText==="string"){this.settings.defaultText=e.defaultText}this.settings.getMessageFunctionName=e.getMessageFunctionName||l;this[this.settings.getMessageFunctionName]=this._i18nlet_get_message;this.regexpStr=this.settings.variableKeyPrefix+"(.+?)"+this.settings.variableKeySuffix;this.regexp=new RegExp(this.regexpStr,"g");this.logger={};this.logger.output=e.output||u;this.logger.debug=function(){var t=arguments;var e=[],i=arguments.length;while(i--){e[i]=t[i]}if(!p.settings.debug){return}e.unshift("DEBUG");p.logger.output.apply(null,e)};this.logger.error=function(t){var e=new Error("[i18nlet] "+t);p.logger.output.apply(null,["ERROR",e])};this.hook={load:f,loads:c};if(e.hook&&e.hook.load){this.logger.debug("hook load()");this.hook.load=e.hook.load}if(e.hook&&e.hook.loads){this.logger.debug("hook loads()");this.hook.loads=e.hook.loads}return this};p.prototype.load=function t(){this.hook.load.apply(this,arguments);return this};p.prototype.loads=function t(){this.hook.loads.apply(this,arguments);return this};p.prototype.changeLangage=function t(e){this.settings.currentLangage=e||this.settings.defaultLangage};p.prototype.currentLangage=function t(){return this.settings.currentLangage};p.prototype._getDefaultText=function t(e,i,n){if(typeof i!=="undefined"&&i!==null){return i}this.logger.debug("context not found. context:'"+e+"'");if(typeof n==="string"){return n}return this.settings.defaultText};p.prototype._i18nlet_get_message=function t(e,i,n){var s=this;i=i||{};n=n||{};if(typeof n.ref==="boolean"){n.ref=!!n.ref}else{n.ref=this.settings.reference}n.langage=n.langage?n.langage:this.currentLangage();var r=this.store[n.langage];if(!r||!r[e]){return this._getDefaultText(e,null,n.defaultText)}var o=r[e];if(!o){this.logger.debug("Context not found. '"+e+"'")}var a=o;var g;while(g=this.regexp.exec(a)){var l=i[g[1].trim()];if(!l){s.logger.debug("It can not convert the variable part. '"+g[0]+"' for '"+a+"'");a=typeof s.settings.noConvertVariable==="string"?a.replace(g[0],s.settings.noConvertVariable):a;continue}a=a.replace(g[0],l);s.regexp.lastIndex=0}if(!n.ref){return a}var h;while(h=this.regexp.exec(a)){var u=h[1].trim();var f=r[u];if(!f){s.logger.debug("It can not convert the constant part. '"+h[0]+"' for '"+a+"'");a=typeof s.settings.noConvertVariable==="string"?a.replace(h[0],s.settings.noConvertVariable):a;continue}a=a.replace(h[0],f);s.regexp.lastIndex=0}return a};t.tag2("riot-i18nlet","<span>{message}</span>","",'class="{opts.class}" riot-style="{opts.style}"',function(t){this.message=this[this.riotI18nlet.settings.getMessageFunctionName](t.context,t.vals,t.options);this.on("update",function(){this.message=this[this.riotI18nlet.settings.getMessageFunctionName](t.context,t.vals,t.options)})});var v=function(i){function n(){i.apply(this,arguments)}if(i)n.__proto__=i;n.prototype=Object.create(i&&i.prototype);n.prototype.constructor=n;n.prototype.init=function n(s){i.prototype.init.call(this,s);this.version="riot-i18nlet: "+e+", i18nlet: "+this.version;var r={};var o=this;r[this.settings.getMessageFunctionName]=function(){return o[o.settings.getMessageFunctionName].apply(o,arguments)};r.riotI18nlet=this;t.mixin(r);return this};return n}(p);var d=new v;return d}(riot);