var riotI18nlet=function(t){"use strict";var e="0.0.1";t=t&&t.hasOwnProperty("default")?t["default"]:t;var n="0.0.5";var i=false;var s="en";var r=":";var a="{{";var o="}}";var g=null;var l="";var h="i";var u=true;var f=function(t){var e=arguments;var n=[],i=arguments.length-1;while(i-- >0){n[i]=e[i+1]}n.unshift("["+t.toUpperCase()+"]");n.unshift("[i18nlet]");try{console.log.apply(console,n)}catch(t){console.log(n)}};var p=function(t,e){var n=this;Object.keys(e).forEach(function(i){n.k2v[""+t+n.settings.langageSeparator+i]=e[i]})};var c=function(t){var e=this;Object.keys(t).forEach(function(n){e.load(n,t[n])})};var v=function t(){};v.prototype.init=function t(e){var v=this;if(e===void 0){e={}}this.version=n||"";this.k2v={};this.settings={};this.settings.currentLangage=this.settings.defaultLangage=e.defaultLangage||s;this.settings.langageSeparator=e.langageSeparator||r;this.settings.debug=e.debug||i;this.settings.variableKeyPrefix=e.variableKeyPrefix||a;this.settings.variableKeySuffix=e.variableKeySuffix||o;this.settings.noConvertVariable=e.noConvertVariable||g;this.settings.reference=u;if(typeof e.reference==="boolean"){this.settings.reference=e.reference}this.settings.defaultText=l;if(typeof e.defaultText==="string"){this.settings.defaultText=e.defaultText}this.settings.getMessageFunctionName=e.getMessageFunctionName||h;this[this.settings.getMessageFunctionName]=this._i18nlet_get_message;this.regexpStr=this.settings.variableKeyPrefix+"(.+?)"+this.settings.variableKeySuffix;this.regexp=new RegExp(this.regexpStr,"g");this.logger={};this.logger.output=e.output||f;this.logger.debug=function(){var t=arguments;var e=[],n=arguments.length;while(n--){e[n]=t[n]}if(!v.settings.debug){return}e.unshift("DEBUG");v.logger.output.apply(null,e)};this.logger.error=function(t){var e=new Error("[i18nlet] "+t);v.logger.output.apply(null,["ERROR",e])};this.hook={load:p,loads:c};if(e.hook&&e.hook.load){this.logger.debug("hook load()");this.hook.load=e.hook.load}if(e.hook&&e.hook.loads){this.logger.debug("hook loads()");this.hook.loads=e.hook.loads}return this};v.prototype.load=function t(){this.hook.load.apply(this,arguments);return this};v.prototype.loads=function t(){this.hook.loads.apply(this,arguments);return this};v.prototype.changeLangage=function t(e){this.settings.currentLangage=e||this.settings.defaultLangage};v.prototype.currentLangage=function t(){return this.settings.currentLangage};v.prototype._getDefaultText=function t(e,n,i){if(typeof n!=="undefined"){return n}this.logger.debug("context not found. context:'"+e+"'");if(typeof i==="string"){return i}return this.settings.defaultText};v.prototype._i18nlet_get_message=function t(e,n,i){var s=this;n=n||{};i=i||{};if(typeof i.ref==="boolean"){i.ref=!!i.ref}else{i.ref=this.settings.reference}i.langage=i.langage?i.langage:this.currentLangage();var r=""+i.langage+this.settings.langageSeparator+e;var a=this.k2v[r];if(!a){this.logger.debug("Context not found. '"+e+"' for '"+r+"'")}var o=a;var g;while(g=this.regexp.exec(o)){var l=n[g[1].trim()];if(!l){s.logger.debug("It can not convert the variable part. '"+g[0]+"' for '"+o+"'");o=typeof s.settings.noConvertVariable==="string"?o.replace(g[0],s.settings.noConvertVariable):o;continue}o=o.replace(g[0],l);s.regexp.lastIndex=0}if(!i.ref){return this._getDefaultText(e,o,i.defaultText)}var h;while(h=this.regexp.exec(o)){var u=""+(i.langage||s.currentLangage())+s.settings.langageSeparator+h[1].trim();var f=s.k2v[u];if(!f){s.logger.debug("It can not convert the constant part. '"+h[0]+"' for '"+o+"'");o=typeof s.settings.noConvertVariable==="string"?o.replace(h[0],s.settings.noConvertVariable):o;continue}o=o.replace(h[0],f);s.regexp.lastIndex=0}return this._getDefaultText(e,o,i.defaultText)};t.tag2("riot-i18nlet","<span>{message}</span>","",'class="{opts.class}" riot-style="{opts.style}"',function(t){this.message=this[this.riotI18nlet.settings.getMessageFunctionName](t.context,t.vals,t.options);this.on("update",function(){debugger;this.message=this[this.riotI18nlet.settings.getMessageFunctionName](t.context,t.vals,t.options)})});var d=function(n){function i(){n.apply(this,arguments)}if(n)i.__proto__=n;i.prototype=Object.create(n&&n.prototype);i.prototype.constructor=i;i.prototype.init=function i(s){n.prototype.init.call(this,s);this.version="riot-i18nlet: "+e+", i18nlet: "+this.version;var r={};var a=this;r[this.settings.getMessageFunctionName]=function(){return a[a.settings.getMessageFunctionName].apply(a,arguments)};r.riotI18nlet=this;t.mixin(r);return this};return i}(v);var y=new d;return y}(riot);